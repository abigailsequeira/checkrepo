<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>
            WEBGL Circle
        </title>
    </head>
    <body>
        <h2>RED CIRCLE</h2>
        <canvas id="webglCanvas" width="500" height="500"></canvas>
        <script>
            //get canvas and webgl context
            const canvas=document.getElementById('webglCanvas');
            const gl=canvas.getContext('webgl2');
            if(!gl){
                alert('Your browser does not support the WEBgl.');
            }
            //vertex shader
            const vertexShaderSource=`#version 300 es
            in vec2 aPosition;
            void main(){
            gl_Position=vec4(aPosition,0.0,1.0);
            }`;

            const vertexshader=gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vertexshader,vertexShaderSource);
            gl.compileShader(vertexshader);

            //Fragment shader
            const fragmentShaderSource=`#version 300 es
            precision mediump float;
            out vec4 fragColor;
            void main(){
                fragColor=vec4(0.08,0.0,0.51,1.0);//set output variable to red
            }`;

            const fragmentshader=gl.createShader(gl.FRAGMENT_SHADER)
            gl.shaderSource(fragmentshader,fragmentShaderSource);
            gl.compileShader(fragmentshader);

            //create Program
            const program=gl.createProgram();
            gl.attachShader(program,vertexshader);
            gl.attachShader(program,fragmentshader);
            gl.linkProgram(program);

            gl.useProgram(program);

            ///generate circle vertices
            function generateCircleVertices(radius,segments){
                const vertices=[0.0,0.0];//center of the circle
                for(let i=0;i<=segments;i++){
                    const angle=(i/segments)*Math.PI*2;
                    vertices.push(Math.cos(angle)*radius, Math.sin(angle)*radius);
                }
                return new Float32Array(vertices);
            }
            const radius=0.5;//radius of the circle
            const segments=100;//no.of segments
            const circleVertices=generateCircleVertices(radius,segments);

            //create buffer
            const positionBuffer=gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);
            gl.bufferData(gl.ARRAY_BUFFER,circleVertices,gl.STATIC_DRAW);

            //link buffer to shader attribute
            const aPosition=gl.getAttribLocation(program,'aPosition');
            gl.enableVertexAttribArray(aPosition);
            gl.vertexAttribPointer(aPosition,2,gl.FLOAT,false,0,0);

            //clear canvas and draw
           gl.clearColor(0.65,1.05,1.0,1.0);
           gl.clear(gl.COLOR_BUFFER_BIT);
           gl.drawArrays(gl.TRIANGLE_FAN,0,circleVertices.length/2);
        
        </script>
        </body>
        </html>