<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name ="viewport" content="width=device-width,initial-scale=1.0">
    <title>WebGL traingle</title>
</head>
<body>
    <h2>Red Triangle</h2>
    <canvas id="webglCanvas" width=500 height =500></canvas>

    <script>
        //get canvas amd webgl context
        const canvas= document.getElementById('webglCanvas');
        const gl= canvas.getContext('webgl2');

        if(!gl){
            alert("Your browser does not support webgl");
        }

        //vertext shader
        const vertexShaderSource=`#version 300 es
        in vec2 aPosition;
        void main(){
        gl_Position=vec4(aPosition,0.0,1.0);
        }
        `;

        const vertexShader= gl.createShader(gl.VERTEX_SHADER)
        gl.shaderSource(vertexShader,vertexShaderSource);
        gl.compileShader(vertexShader);

        //fragment shader
            const fragmentShaderSource=`#version 300 es 
            precision mediump float;
            out vec4 fragColour;
            void main(){
            fragColour=vec4(1.0,0.0,0.0,1.0);//set op variable to red
            }`;

            const fragmentshader=gl.createShader(gl.FRAGMENT_SHADER);
            gl.shaderSource(fragmentshader,fragmentShaderSource);
            gl.compileShader(fragmentshader);

        //create program
        const program=gl.createProgram();
        gl.attachShader(program,vertexShader);
        gl.attachShader(program,fragmentshader);
        gl.linkProgram(program);
        gl.useProgram(program);

        //<!-- if(!gl.getProgramParameter(program,gl.LINK_STATUS)){
           // console.error("Error linking program:",gl.getProgramInfoLog(program));
            //gl.deleteProgram(program)
        //} -->


        //define traingle vertices
        const TriangleVertices=new Float32Array([
        0.0,0.5, //top vertices
        -0.5,-0.5 ,//bottom left buffer
        0.5,-0.5//bottom right vertex
        ]);

        //create buffer
        const positionBuffer=gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);
        gl.bufferData(gl.ARRAY_BUFFER,TriangleVertices,gl.STATIC_DRAW);


        //link buffer and shader attribute

        const aPosition=gl.getAttribLocation(program,'aPosition');
        gl.enableVertexAttribArray(aPosition);
        gl.vertexAttribPointer(aPosition,2,gl.FLOAT,false,0,0);

        //clear canvas and draw
        gl.clearColor(1.0,1.0,1.0,1.0);//white background
        gl.clear(gl.COLOUR_BUFFER_BIT);
        gl.drawArrays(gl.TRIANGLES,0,3);
    </script>
</body>
</html>